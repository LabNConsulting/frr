# SPDX-License-Identifier: GPL-2.0
# clang-format configuration file. Intended for clang-format >= 11.
#
# For more information, see:
#
#   Documentation/process/clang-format.rst
#   https://clang.llvm.org/docs/ClangFormat.html
#   https://clang.llvm.org/docs/ClangFormatStyleOptions.html
#
---
BasedOnStyle: LLVM
Language: Cpp
IndentWidth: 8
UseTab: Always
BreakBeforeBraces: Linux
AlwaysBreakBeforeMultilineStrings: true
AllowShortIfStatementsOnASingleLine: false
AllowShortLoopsOnASingleLine: false
AllowShortFunctionsOnASingleLine: false
IndentCaseLabels: false
AlignEscapedNewlinesLeft: false
AlignTrailingComments: true
AllowAllParametersOfDeclarationOnNextLine: false
AlignAfterOpenBracket: true
SpaceAfterCStyleCast: false
MaxEmptyLinesToKeep: 2
BreakBeforeBinaryOperators: None
BreakStringLiterals: false
SortIncludes:    false
IncludeCategories:
  - Regex:           '^(<|lib)'
    Priority:        0
CommentPragmas: '\$(FRR|clippy)'
ContinuationIndentWidth: 8
ForEachMacros:
  # lib
  - frr_each
  - frr_each_safe
  - frr_each_from
  - frr_rev_each
  - frr_rev_each_safe
  - frr_rev_each_from
  - frr_with_mutex
  - frr_with_privs
  - LIST_FOREACH
  - LIST_FOREACH_SAFE
  - SLIST_FOREACH
  - SLIST_FOREACH_SAFE
  - SLIST_FOREACH_PREVPTR
  - STAILQ_FOREACH
  - STAILQ_FOREACH_SAFE
  - TAILQ_FOREACH
  - TAILQ_FOREACH_SAFE
  - TAILQ_FOREACH_REVERSE
  - TAILQ_FOREACH_REVERSE_SAFE
  - RB_FOREACH
  - RB_FOREACH_SAFE
  - RB_FOREACH_REVERSE
  - RB_FOREACH_REVERSE_SAFE
  - SPLAY_FOREACH
  - FOR_ALL_INTERFACES
  - FOR_ALL_INTERFACES_ADDRESSES
  - JSON_FOREACH
  - FOREACH_BE_TXN_BATCH_IN_LIST
  - FOREACH_BE_APPLY_BATCH_IN_LIST
  - FOREACH_BE_TXN_IN_LIST
  - FOREACH_SESSION_IN_LIST
  - FOREACH_MGMTD_BE_CLIENT_ID
  # libyang
  - LY_FOR_KEYS
  - LY_LIST_FOR
  - LY_TREE_FOR
  - LY_TREE_DFS_BEGIN
  - LYD_TREE_DFS_BEGIN
  # zebra
  - RE_DEST_FOREACH_ROUTE
  - RE_DEST_FOREACH_ROUTE_SAFE
  - RNODE_FOREACH_RE
  - RNODE_FOREACH_RE_SAFE
  # bgpd
  - UPDGRP_FOREACH_SUBGRP
  - UPDGRP_FOREACH_SUBGRP_SAFE
  - SUBGRP_FOREACH_PEER
  - SUBGRP_FOREACH_PEER_SAFE
  - SUBGRP_FOREACH_ADJ
  - SUBGRP_FOREACH_ADJ_SAFE
  - AF_FOREACH
  - FOREACH_AFI_SAFI
  - FOREACH_AFI_SAFI_NSF
  - FOREACH_SAFI
  # ospfd
  - LSDB_LOOP
  # mgmtd
  - FOREACH_CMT_REC
  - FOREACH_TXN_CFG_BATCH_IN_LIST
  - FOREACH_TXN_REQ_IN_LIST
  - FOREACH_TXN_IN_LIST
  - FOREACH_MGMTD_DB_ID
  - FOREACH_ADAPTER_IN_LIST
  - FOREACH_SESSION_IN_LIST
  - FOREACH_SESSION_IN_LIST_SAFE

# Don't break a string into multi-string-fragments
PenaltyBreakString: 1000
# Allow past ColumnLimit to keep function arguments aligned with paren
PenaltyBreakBeforeFirstCallParameter: 1000
# Try and stay under ColumnLimit, but not at the cost of incomprehensible code.
PenaltyExcessCharacter: 30
# Should be affecting alignment with open parent, so minimize this to prefer it. >v12
PenaltyIndentedWhitespace: 0
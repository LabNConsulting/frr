service password-encryption
frr defaults traditional

hostname r2
password zebra
log stdout notifications

log commands
log file bgpd.log debugging

router bgp 5226
   bgp router-id 2.2.2.2
   no bgp network import-check
   no bgp ebgp-requires-policy

   neighbor 10.0.1.1 remote-as 5227
   neighbor 10.0.1.1 update-source 10.0.1.2
   neighbor 10.0.1.1 password 1.2.0.0

   neighbor 2001:db8:beef:1::1 remote-as 5227
   neighbor 2001:db8:beef:1::1 update-source 2001:db8:beef:1::2
   neighbor 2001:db8:beef:1::1 password 1.2.0.6

   address-family ipv4 unicast
     neighbor 10.0.1.1 activate
     neighbor 10.0.1.1 prefix-list filter-incoming in
     no neighbor 2001:db8:beef:1::1 activate
     network 2.2.2.2/32
     network 10.0.3.0/24
     redistribute connected route-map rm-nh
     redistribute ospf route-map rm-nh
   exit-address-family

   address-family ipv6 unicast
     neighbor 2001:db8:beef:1::1 activate
   exit-address-family
!

ip prefix-list filter-incoming seq 10 deny 3.3.3.3/32 le 32
ip prefix-list filter-incoming seq 20 deny 2.2.2.2/32 le 32
ip prefix-list filter-incoming seq 30 deny 10.0.3.0/24 le 32
ip prefix-list filter-incoming seq 40 permit any


access-list al-any permit any
!
route-map rm-nh permit 10
 match ip address al-any
 set ip next-hop 2.2.2.2
!
end


